// Generated by purs version 0.15.15
import * as Data_Function from "../Data.Function/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Hylograph_AST from "../Hylograph.AST/index.js";
import * as Hylograph_Expr_Interpreter_Eval from "../Hylograph.Expr.Interpreter.Eval/index.js";
import * as Hylograph_Internal_Selection_Types from "../Hylograph.Internal.Selection.Types/index.js";
import * as Hylograph_Unified_Attribute from "../Hylograph.Unified.Attribute/index.js";
import * as Hylograph_Unified_DataDSL from "../Hylograph.Unified.DataDSL/index.js";
import * as Hylograph_Unified_Display from "../Hylograph.Unified.Display/index.js";
var source = /* #__PURE__ */ Hylograph_Unified_DataDSL.source(Hylograph_Expr_Interpreter_Eval.dataDSLEvalD);
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showNumber);
var simpleJoinExample = function (points) {
    var circleTemplate = function (v) {
        return Hylograph_AST.elem(Hylograph_Internal_Selection_Types.Circle.value)([ Hylograph_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attrStatic("fill")("steelblue") ]);
    };
    return Hylograph_AST.joinData("circles")("circle")(points)(circleTemplate);
};
var profitDisplay = Hylograph_Unified_Display.signedD;
var percentDisplay = /* #__PURE__ */ Hylograph_Unified_Display.composeD(/* #__PURE__ */ Hylograph_Unified_Display.composeD(/* #__PURE__ */ Hylograph_Unified_Display.composeD(/* #__PURE__ */ Hylograph_Unified_Display.scaleD(100.0))(/* #__PURE__ */ Hylograph_Unified_Display.roundD(1)))(Hylograph_Unified_Display.showNumD))(/* #__PURE__ */ Hylograph_Unified_Display.suffixD("%"));
var quarterGrowthDisplay = /* #__PURE__ */ (function () {
    var computeGrowthRate = function (q) {
        return (q.revenue - q.expenses) / q.expenses;
    };
    return Hylograph_Unified_Display.lmapD(computeGrowthRate)(percentDisplay);
})();
var showAsPercent = /* #__PURE__ */ Hylograph_Unified_Display.runDisplay(percentDisplay);
var newStyleViz = function (dataPoints) {
    return Hylograph_AST.joinData("points")("circle")(dataPoints)(function (v) {
        return Hylograph_AST.elem(Hylograph_Internal_Selection_Types.Circle.value)([ Hylograph_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attrStatic("fill")("steelblue"), Hylograph_Unified_Attribute.attrStatic("stroke")("white"), Hylograph_Unified_Attribute.attrStatic("stroke-width")("1") ]);
    });
};
var newStyleCircleFormatted = function (v) {
    return [ Hylograph_Unified_Attribute.attr("cx")(function (v1) {
        return v1.x;
    })(Hylograph_Unified_Display.composeD(Hylograph_Unified_Display.scaleD(10.0))(Hylograph_Unified_Display.showNumD)), Hylograph_Unified_Attribute.attr("cy")(function (v1) {
        return v1.y;
    })(Hylograph_Unified_Display.composeD(Hylograph_Unified_Display.scaleD(10.0))(Hylograph_Unified_Display.showNumD)), Hylograph_Unified_Attribute.attr("r")(function (v1) {
        return v1.value;
    })(Hylograph_Unified_Display.composeD(Hylograph_Unified_Display.clampD(5.0)(50.0))(Hylograph_Unified_Display.showNumD)), Hylograph_Unified_Attribute.attr("fill")(function (v1) {
        return v1.category;
    })(Hylograph_Unified_Display.idD) ];
};
var newStyleCircle = function (v) {
    return [ Hylograph_Unified_Attribute.attr("cx")(function (v1) {
        return v1.x;
    })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("cy")(function (v1) {
        return v1.y;
    })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("r")(function (v1) {
        return v1.value;
    })(Hylograph_Unified_Display.composeD(Hylograph_Unified_Display.roundD(1))(Hylograph_Unified_Display.showNumD)), Hylograph_Unified_Attribute.attr("fill")(function (v1) {
        return v1.category;
    })(Hylograph_Unified_Display.idD) ];
};
var nestedJoinExample = function (scene) {
    var circleTemplate = function (v) {
        return Hylograph_AST.elem(Hylograph_Internal_Selection_Types.Circle.value)([ Hylograph_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(Hylograph_Unified_Display.showNumD) ]);
    };
    return Hylograph_AST.nestedJoin("points")("circle")([ scene ])(function (v) {
        return v.points;
    })(circleTemplate);
};
var myComputation = function (dictDataDSL) {
    var avgA = Hylograph_Unified_DataDSL.avgA(dictDataDSL);
    var filterA = Hylograph_Unified_DataDSL.filterA(dictDataDSL);
    var mapA = Hylograph_Unified_DataDSL.mapA(dictDataDSL);
    return function (data_) {
        return avgA(filterA(function (x) {
            return x > 0.0;
        })(mapA(function (x) {
            return x * 1.1;
        })(data_)));
    };
};
var myComputation1 = /* #__PURE__ */ myComputation(Hylograph_Expr_Interpreter_Eval.dataDSLEvalD);
var useInViz = function (data_) {
    var v = myComputation1(source(new Hylograph_Unified_DataDSL.InlineSource(data_)));
    return v(Data_Unit.unit)(0);
};
var joinWithGUPExample = function (points) {
    var circleTemplate = function (v) {
        return Hylograph_AST.elem(Hylograph_Internal_Selection_Types.Circle.value)([ Hylograph_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(Hylograph_Unified_Display.showNumD) ]);
    };
    return Hylograph_AST.updateJoin("circles")("circle")(points)(circleTemplate)({
        enter: new Data_Maybe.Just({
            attrs: [ Hylograph_Unified_Attribute.attr("r")(Data_Function["const"](0.0))(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("opacity")(Data_Function["const"](0.0))(Hylograph_Unified_Display.showNumD) ],
            transition: Data_Maybe.Nothing.value
        }),
        update: new Data_Maybe.Just({
            attrs: [  ],
            transition: Data_Maybe.Nothing.value
        }),
        exit: new Data_Maybe.Just({
            attrs: [ Hylograph_Unified_Attribute.attr("opacity")(Data_Function["const"](0.0))(Hylograph_Unified_Display.showNumD) ],
            transition: Data_Maybe.Nothing.value
        }),
        keyFn: new Data_Maybe.Just(function (p) {
            return show(p.x) + ("," + (show(p.y) + ("," + p.category)));
        })
    });
};
var fullJoinExample = function (scene) {
    var circleTemplate = function (v) {
        return Hylograph_AST.elem(Hylograph_Internal_Selection_Types.Circle.value)([ Hylograph_Unified_Attribute.attr("cx")(function (v1) {
            return v1.x;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("cy")(function (v1) {
            return v1.y;
        })(Hylograph_Unified_Display.showNumD), Hylograph_Unified_Attribute.attr("r")(function (v1) {
            return v1.value;
        })(Hylograph_Unified_Display.showNumD) ]);
    };
    return Hylograph_AST.updateNestedJoin("viz")("circle")([ scene ])(function (v) {
        return v.points;
    })(circleTemplate)({
        enter: new Data_Maybe.Just({
            attrs: [ Hylograph_Unified_Attribute.attr("r")(Data_Function["const"](0.0))(Hylograph_Unified_Display.showNumD) ],
            transition: Data_Maybe.Nothing.value
        }),
        update: Data_Maybe.Nothing.value,
        exit: new Data_Maybe.Just({
            attrs: [ Hylograph_Unified_Attribute.attr("opacity")(Data_Function["const"](0.0))(Hylograph_Unified_Display.showNumD) ],
            transition: Data_Maybe.Nothing.value
        })
    });
};
var formatLabel = function (q) {
    return Hylograph_Unified_Display.runDisplay(profitDisplay)(q.revenue - q.expenses);
};
var formatGrowthLabel = /* #__PURE__ */ Hylograph_Unified_Display.runDisplay(quarterGrowthDisplay);
var currencyDisplay = Hylograph_Unified_Display.currencyD;
var expensesDisplay = /* #__PURE__ */ Hylograph_Unified_Display.lmapD(function (v) {
    return v.expenses;
})(currencyDisplay);
var revenueDisplay = /* #__PURE__ */ Hylograph_Unified_Display.lmapD(function (v) {
    return v.revenue;
})(currencyDisplay);
var showAsCurrency = /* #__PURE__ */ Hylograph_Unified_Display.runDisplay(currencyDisplay);
var computeProfit = function (dictDataDSL) {
    return Hylograph_Unified_DataDSL.mapA(dictDataDSL)(function (q) {
        return q.revenue - q.expenses;
    });
};
var totalProfit = function (dictDataDSL) {
    var sumA = Hylograph_Unified_DataDSL.sumA(dictDataDSL);
    var computeProfit1 = computeProfit(dictDataDSL);
    return function (quarters) {
        return sumA(computeProfit1(quarters));
    };
};
var computeGrowth = function (dictDataDSL) {
    return Hylograph_Unified_DataDSL.mapA(dictDataDSL)(function (x) {
        return x * 1.1;
    });
};
var compactDisplay = Hylograph_Unified_Display.compactD;
var averageAboveThreshold = function (dictDataDSL) {
    var avgA = Hylograph_Unified_DataDSL.avgA(dictDataDSL);
    var filterA = Hylograph_Unified_DataDSL.filterA(dictDataDSL);
    return function (threshold) {
        return function (data_) {
            return avgA(filterA(function (x) {
                return x > threshold;
            })(data_));
        };
    };
};
export {
    newStyleCircle,
    newStyleCircleFormatted,
    computeGrowth,
    averageAboveThreshold,
    computeProfit,
    totalProfit,
    percentDisplay,
    currencyDisplay,
    profitDisplay,
    compactDisplay,
    showAsPercent,
    showAsCurrency,
    quarterGrowthDisplay,
    revenueDisplay,
    expensesDisplay,
    newStyleViz,
    myComputation,
    useInViz,
    formatLabel,
    formatGrowthLabel,
    simpleJoinExample,
    joinWithGUPExample,
    nestedJoinExample,
    fullJoinExample
};
//# sourceMappingURL=index.js.map
