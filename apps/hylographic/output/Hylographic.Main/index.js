// Generated by purs version 0.15.15
import * as Control_Bind from "../Control.Bind/index.js";
import * as Control_Monad_State_Class from "../Control.Monad.State.Class/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Ord from "../Data.Ord/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Effect_Aff from "../Effect.Aff/index.js";
import * as Effect_Aff_Class from "../Effect.Aff.Class/index.js";
import * as Effect_Class from "../Effect.Class/index.js";
import * as Halogen_Aff_Util from "../Halogen.Aff.Util/index.js";
import * as Halogen_Component from "../Halogen.Component/index.js";
import * as Halogen_HTML from "../Halogen.HTML/index.js";
import * as Halogen_HTML_Core from "../Halogen.HTML.Core/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Events from "../Halogen.HTML.Events/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_Query_HalogenM from "../Halogen.Query.HalogenM/index.js";
import * as Halogen_Subscription from "../Halogen.Subscription/index.js";
import * as Halogen_VDom_Driver from "../Halogen.VDom.Driver/index.js";
import * as Hylographic_Blog_ArticleViewer from "../Hylographic.Blog.ArticleViewer/index.js";
import * as Hylographic_Blog_ForceIndex from "../Hylographic.Blog.ForceIndex/index.js";
import * as Hylographic_RoutingDSL from "../Hylographic.RoutingDSL/index.js";
import * as Hylographic_Types from "../Hylographic.Types/index.js";
import * as Hylographic_Viz_LSystemPlant from "../Hylographic.Viz.LSystemPlant/index.js";
import * as Routing_Hash from "../Routing.Hash/index.js";
import * as Type_Proxy from "../Type.Proxy/index.js";
var $$void = /* #__PURE__ */ Data_Functor["void"](Halogen_Query_HalogenM.functorHalogenM);
var liftEffect = /* #__PURE__ */ Effect_Class.liftEffect(/* #__PURE__ */ Halogen_Query_HalogenM.monadEffectHalogenM(Effect_Aff.monadEffectAff));
var bind = /* #__PURE__ */ Control_Bind.bind(Halogen_Query_HalogenM.bindHalogenM);
var get = /* #__PURE__ */ Control_Monad_State_Class.get(Halogen_Query_HalogenM.monadStateHalogenM);
var modify_ = /* #__PURE__ */ Control_Monad_State_Class.modify_(Halogen_Query_HalogenM.monadStateHalogenM);
var slot = /* #__PURE__ */ Halogen_HTML.slot()({
    reflectSymbol: function () {
        return "forceIndex";
    }
})(Data_Ord.ordUnit);
var component1 = /* #__PURE__ */ Hylographic_Blog_ForceIndex.component(Effect_Aff_Class.monadAffAff);
var slot_ = /* #__PURE__ */ Halogen_HTML.slot_();
var slot_1 = /* #__PURE__ */ slot_({
    reflectSymbol: function () {
        return "articleViewer";
    }
})(Data_Ord.ordUnit);
var slot_2 = /* #__PURE__ */ slot_({
    reflectSymbol: function () {
        return "lsystemPlant";
    }
})(Data_Ord.ordInt);
var bind1 = /* #__PURE__ */ Control_Bind.bind(Effect_Aff.bindAff);
var Initialize = /* #__PURE__ */ (function () {
    function Initialize() {

    };
    Initialize.value = new Initialize();
    return Initialize;
})();
var Navigate = /* #__PURE__ */ (function () {
    function Navigate(value0) {
        this.value0 = value0;
    };
    Navigate.create = function (value0) {
        return new Navigate(value0);
    };
    return Navigate;
})();
var RouteChanged = /* #__PURE__ */ (function () {
    function RouteChanged(value0) {
        this.value0 = value0;
    };
    RouteChanged.create = function (value0) {
        return new RouteChanged(value0);
    };
    return RouteChanged;
})();
var ForceIndexOutput = /* #__PURE__ */ (function () {
    function ForceIndexOutput(value0) {
        this.value0 = value0;
    };
    ForceIndexOutput.create = function (value0) {
        return new ForceIndexOutput(value0);
    };
    return ForceIndexOutput;
})();
var sampleArticles = [ {
    slug: "hello-world",
    title: "Hello World",
    date: "2024-01-15",
    tags: [ "introduction", "demo" ]
} ];
var renderHeader = /* #__PURE__ */ Halogen_HTML_Elements.header([ /* #__PURE__ */ Halogen_HTML_Properties.classes([ "hylographic__header" ]) ])([ /* #__PURE__ */ Halogen_HTML_Elements.a([ /* #__PURE__ */ Halogen_HTML_Properties.href("#/"), /* #__PURE__ */ Halogen_HTML_Events.onClick(function (v) {
    return new Navigate(Hylographic_Types.Home.value);
}) ])([ /* #__PURE__ */ Halogen_HTML_Elements.h1_([ /* #__PURE__ */ Halogen_HTML_Core.text("Hylographic") ]) ]) ]);
var handleAction = function ($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v) {
        if (v instanceof Initialize) {
            $tco_done = true;
            return $$void(Halogen_Query_HalogenM.subscribe(Halogen_Subscription.makeEmitter(function (push) {
                return Routing_Hash.matches(Hylographic_RoutingDSL.routing)(function (v1) {
                    return function (newRoute) {
                        return push(new RouteChanged(new Data_Maybe.Just(newRoute)));
                    };
                });
            })));
        };
        if (v instanceof Navigate) {
            $tco_done = true;
            return liftEffect(Routing_Hash.setHash(Hylographic_RoutingDSL.routeToPath(v.value0)));
        };
        if (v instanceof RouteChanged) {
            $tco_done = true;
            return bind(get)(function (state) {
                if (v.value0 instanceof Data_Maybe.Just) {
                    return modify_(function (v1) {
                        var $32 = {};
                        for (var $33 in v1) {
                            if ({}.hasOwnProperty.call(v1, $33)) {
                                $32[$33] = v1[$33];
                            };
                        };
                        $32.currentRoute = v.value0.value0;
                        $32.plantGeneration = state.plantGeneration + 1 | 0;
                        return $32;
                    });
                };
                if (v.value0 instanceof Data_Maybe.Nothing) {
                    return modify_(function (v1) {
                        var $36 = {};
                        for (var $37 in v1) {
                            if ({}.hasOwnProperty.call(v1, $37)) {
                                $36[$37] = v1[$37];
                            };
                        };
                        $36.currentRoute = Hylographic_Types.NotFound.value;
                        $36.plantGeneration = state.plantGeneration + 1 | 0;
                        return $36;
                    });
                };
                throw new Error("Failed pattern match at Hylographic.Main (line 129, column 5 - line 131, column 102): " + [ v.value0.constructor.name ]);
            });
        };
        if (v instanceof ForceIndexOutput) {
            $copy_v = new Navigate(new Hylographic_Types.Post(v.value0.value0));
            return;
        };
        throw new Error("Failed pattern match at Hylographic.Main (line 117, column 16 - line 135, column 42): " + [ v.constructor.name ]);
    };
    while (!$tco_done) {
        $tco_result = $tco_loop($copy_v);
    };
    return $tco_result;
};
var _lsystemPlant = /* #__PURE__ */ (function () {
    return Type_Proxy["Proxy"].value;
})();
var _forceIndex = /* #__PURE__ */ (function () {
    return Type_Proxy["Proxy"].value;
})();
var _articleViewer = /* #__PURE__ */ (function () {
    return Type_Proxy["Proxy"].value;
})();
var renderPage = function (v) {
    if (v instanceof Hylographic_Types.Home) {
        return slot(_forceIndex)(Data_Unit.unit)(component1)(sampleArticles)(ForceIndexOutput.create);
    };
    if (v instanceof Hylographic_Types.Post) {
        return slot_1(_articleViewer)(Data_Unit.unit)(Hylographic_Blog_ArticleViewer.component)(v.value0);
    };
    if (v instanceof Hylographic_Types.NotFound) {
        return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.classes([ "not-found" ]) ])([ Halogen_HTML_Elements.h2_([ Halogen_HTML_Core.text("404 - Page Not Found") ]), Halogen_HTML_Elements.p_([ Halogen_HTML_Core.text("The page you're looking for doesn't exist.") ]), Halogen_HTML_Elements.a([ Halogen_HTML_Properties.href("#/"), Halogen_HTML_Events.onClick(function (v1) {
            return new Navigate(Hylographic_Types.Home.value);
        }) ])([ Halogen_HTML_Core.text("Go to Home") ]) ]);
    };
    throw new Error("Failed pattern match at Hylographic.Main (line 97, column 14 - line 114, column 8): " + [ v.constructor.name ]);
};
var render = function (state) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.classes([ "hylographic" ]) ])([ slot_2(_lsystemPlant)(state.plantGeneration)(Hylographic_Viz_LSystemPlant.component)(Data_Unit.unit), renderHeader, Halogen_HTML_Elements.main([ Halogen_HTML_Properties.classes([ "hylographic__main" ]) ])([ renderPage(state.currentRoute) ]) ]);
};
var component = /* #__PURE__ */ (function () {
    return Halogen_Component.mkComponent({
        initialState: function (v) {
            return {
                currentRoute: Hylographic_Types.Home.value,
                plantGeneration: 0
            };
        },
        render: render,
        "eval": Halogen_Component.mkEval({
            handleQuery: Halogen_Component.defaultEval.handleQuery,
            receive: Halogen_Component.defaultEval.receive,
            finalize: Halogen_Component.defaultEval.finalize,
            handleAction: handleAction,
            initialize: new Data_Maybe.Just(Initialize.value)
        })
    });
})();
var main = /* #__PURE__ */ Halogen_Aff_Util.runHalogenAff(/* #__PURE__ */ bind1(/* #__PURE__ */ Halogen_Aff_Util.selectElement("#app"))(function (maybeApp) {
    if (maybeApp instanceof Data_Maybe.Nothing) {
        return bind1(Halogen_Aff_Util.awaitBody)(function (body) {
            return Halogen_VDom_Driver.runUI(component)(Data_Unit.unit)(body);
        });
    };
    if (maybeApp instanceof Data_Maybe.Just) {
        return Halogen_VDom_Driver.runUI(component)(Data_Unit.unit)(maybeApp.value0);
    };
    throw new Error("Failed pattern match at Hylographic.Main (line 141, column 5 - line 146, column 35): " + [ maybeApp.constructor.name ]);
}));
export {
    Initialize,
    Navigate,
    RouteChanged,
    ForceIndexOutput,
    _articleViewer,
    _forceIndex,
    _lsystemPlant,
    sampleArticles,
    component,
    render,
    renderHeader,
    renderPage,
    handleAction,
    main
};
//# sourceMappingURL=index.js.map
