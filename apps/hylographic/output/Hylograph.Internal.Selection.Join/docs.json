{"comments":"Internal: Data join algorithm implementation.\n\nComputes the enter/update/exit sets when binding new data to existing elements.\nThis is the core of D3's data join pattern, implemented in pure PureScript.\n\n- `computeJoin`: Index-based matching (by position)\n- `computeJoinWithKey`: Key-based matching (by identity function)\n\nReturns `JoinSets` containing:\n- `enter`: New data without existing elements\n- `update`: Data matched to existing elements\n- `exit`: Existing elements without matching data\n\n**Internal module** - use `joinData` / `joinDataWithKey` from `Hylograph.Selection`.\n","declarations":[{"children":[],"comments":"Pure join algorithm matching D3 semantics with support for duplicate datums\n\nThis implements the data join pattern:\n1. New data not in old elements -> enter\n2. Data matching existing elements -> update\n3. Old elements not in new data -> exit\n\nHandles duplicates correctly by matching in order. For example,\nif old data is \"HELLO\" and new data is \"WORLD\", the two 'L's in \"HELLO\"\nwill match correctly with elements in order.\n\nUsers control identity semantics via their Eq instance:\n\n```purescript\ninstance Eq Node where\n  eq (Node a) (Node b) = a.id == b.id  -- Identity by ID\n```\n\nTime complexity: O(n * m) worst case, where n = new data length, m = old elements length\nSpace complexity: O(m) for tracking remaining elements\n\nProperties:\n- Disjoint: No element appears in multiple sets\n- Complete: All new data appears in enter ∪ update\n- Complete: All old elements appear in update ∪ exit\n- Order: enter and update preserve input order\n- Duplicates: Handles duplicate datums by matching in order\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"constraintAnn":[],"constraintArgs":[{"annotation":[],"contents":"datum","tag":"TypeVar"}],"constraintClass":[["Data","Eq"],"Eq"],"constraintData":null,"constraintKindArgs":[]},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Internal","Selection","Join"],"ElementBinding"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Internal","Selection","Join"],"JoinSets"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"ConstrainedType"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[91,20],"name":"../../visualisation libraries/purescript-hylograph-selection/src/Hylograph/Internal/Selection/Join.purs","start":[86,1]},"title":"computeJoin"},{"children":[],"comments":"Pure join algorithm with custom key function\n\nLike computeJoin, but uses a key function to extract comparable keys\ninstead of requiring Eq on the data itself.\n\nThis is essential for data types that don't have lawful Eq instances\n(e.g., opaque foreign types like D3Link_Swizzled).\n\nExample:\n```purescript\ncomputeJoinWithKey newLinks oldLinks (\\l -> unsafeCoerce l # _.id)\n```\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"datum","kind":null,"skolem":null,"type":{"annotation":[],"contents":{"identifier":"key","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"constraintAnn":[],"constraintArgs":[{"annotation":[],"contents":"key","tag":"TypeVar"}],"constraintClass":[["Data","Eq"],"Eq"],"constraintData":null,"constraintKindArgs":[]},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Internal","Selection","Join"],"ElementBinding"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":"key","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Internal","Selection","Join"],"JoinSets"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"ConstrainedType"},"visibility":"TypeVarInvisible"},"tag":"ForAll"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[156,20],"name":"../../visualisation libraries/purescript-hylograph-selection/src/Hylograph/Internal/Selection/Join.purs","start":[150,1]},"title":"computeJoinWithKey"},{"children":[],"comments":"Represents an element with its bound datum\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["element",{"annotation":[],"contents":[["Web","DOM","Internal","Types"],"Element"],"tag":"TypeConstructor"},{"annotation":[],"contents":["datum",{"annotation":[],"contents":"datum","tag":"TypeVar"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[36,4],"name":"../../visualisation libraries/purescript-hylograph-selection/src/Hylograph/Internal/Selection/Join.purs","start":[33,1]},"title":"ElementBinding"},{"children":[],"comments":"Represents a datum entering with its index in the new data array\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["datum",{"annotation":[],"contents":"datum","tag":"TypeVar"},{"annotation":[],"contents":["newIndex",{"annotation":[],"contents":[["Prim"],"Int"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[42,4],"name":"../../visualisation libraries/purescript-hylograph-selection/src/Hylograph/Internal/Selection/Join.purs","start":[39,1]},"title":"EnterBinding"},{"children":[],"comments":"Represents an element being updated from old to new datum\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["element",{"annotation":[],"contents":[["Web","DOM","Internal","Types"],"Element"],"tag":"TypeConstructor"},{"annotation":[],"contents":["oldDatum",{"annotation":[],"contents":"datum","tag":"TypeVar"},{"annotation":[],"contents":["newDatum",{"annotation":[],"contents":"datum","tag":"TypeVar"},{"annotation":[],"contents":["newIndex",{"annotation":[],"contents":[["Prim"],"Int"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[50,4],"name":"../../visualisation libraries/purescript-hylograph-selection/src/Hylograph/Internal/Selection/Join.purs","start":[45,1]},"title":"UpdateBinding"},{"children":[],"comments":"The three disjoint sets resulting from a join\n","info":{"arguments":[["datum",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["enter",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Internal","Selection","Join"],"EnterBinding"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["update",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Internal","Selection","Join"],"UpdateBinding"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["exit",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Internal","Selection","Join"],"ElementBinding"],"tag":"TypeConstructor"},{"annotation":[],"contents":"datum","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[57,4],"name":"../../visualisation libraries/purescript-hylograph-selection/src/Hylograph/Internal/Selection/Join.purs","start":[53,1]},"title":"JoinSets"}],"name":"Hylograph.Internal.Selection.Join","reExports":[]}