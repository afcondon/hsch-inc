{"comments":"Circle packing layout algorithm.\n\nImplements the front-chain circle packing algorithm for laying out hierarchical\ndata as nested circles. Each node's area is proportional to its value, with\nchildren packed inside their parent's circle.\n\nThe algorithm:\n1. Build hierarchy from input data with `hierarchy`\n2. Pack sibling circles using `packSiblingsMap` (front-chain algorithm)\n3. Compute enclosing circle with `packEnclose`\n4. Recursively pack all levels with `pack`\n\nBased on Wang et al.'s \"Visualization of Large Hierarchical Data by Circle Packing\"\nand the D3.js implementation.\n","declarations":[{"children":[],"comments":"Circle ID for map-based storage\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[["Prim"],"Int"],"tag":"TypeConstructor"}},"kind":null,"sourceSpan":{"end":[45,20],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[45,1]},"title":"CircleId"},{"children":[],"comments":"Circle type for geometric operations\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["x",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["y",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["r",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[52,4],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[48,1]},"title":"Circle"},{"children":[],"comments":"State for map-based pack algorithm\n","info":{"arguments":[],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["circles",{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Map","Internal"],"Map"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"CircleId"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["frontChain",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"CircleId"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["nextId",{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"CircleId"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[59,4],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[55,1]},"title":"PackState"},{"children":[],"comments":null,"info":{"declType":"value","type":{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}},"kind":null,"sourceSpan":{"end":[65,18],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[65,1]},"title":"epsilon"},{"children":[],"comments":null,"info":{"declType":"value","type":{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}},"kind":null,"sourceSpan":{"end":[68,19],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[68,1]},"title":"epsilon6"},{"children":[],"comments":"Does circle a enclose circle b (with tolerance)?\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[72,44],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[72,1]},"title":"enclosesWeak"},{"children":[],"comments":"Do circles a and b intersect?\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Boolean"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[82,42],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[82,1]},"title":"intersects"},{"children":[],"comments":"Position circle c tangent to circles a and b\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[96,46],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[96,1]},"title":"place"},{"children":[],"comments":"Pack siblings using map-based front-chain algorithm\n","info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["circles",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["radius",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[409,81],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[409,1]},"title":"packSiblingsMap"},{"children":[],"comments":null,"info":{"declType":"value","type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"Circle"],"tag":"TypeConstructor"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[593,38],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[593,1]},"title":"packEnclose"},{"children":[{"comments":null,"info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["data_",{"annotation":[],"contents":"a","tag":"TypeVar"},{"annotation":[],"contents":["depth",{"annotation":[],"contents":[["Prim"],"Int"],"tag":"TypeConstructor"},{"annotation":[],"contents":["height",{"annotation":[],"contents":[["Prim"],"Int"],"tag":"TypeConstructor"},{"annotation":[],"contents":["value",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["children",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"contents":["x",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["y",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["r",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[623,27],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[623,17]},"title":"PackNode"},{"comments":null,"info":{"declType":"instance","dependencies":[{"constraintAnn":[],"constraintArgs":[{"annotation":[],"contents":"a","tag":"TypeVar"}],"constraintClass":[["Data","Eq"],"Eq"],"constraintData":null,"constraintKindArgs":[]}],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Eq"],"Eq"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"sourceSpan":{"end":[634,54],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[634,1]},"title":"eqPackNode"},{"comments":null,"info":{"declType":"instance","dependencies":[{"constraintAnn":[],"constraintArgs":[{"annotation":[],"contents":"a","tag":"TypeVar"}],"constraintClass":[["Data","Ord"],"Ord"],"constraintData":null,"constraintKindArgs":[]}],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Ord"],"Ord"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"sourceSpan":{"end":[635,57],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[635,1]},"title":"ordPackNode"},{"comments":null,"info":{"declType":"instance","dependencies":[{"constraintAnn":[],"constraintArgs":[{"annotation":[],"contents":"a","tag":"TypeVar"}],"constraintClass":[["Data","Show"],"Show"],"constraintData":null,"constraintKindArgs":[]}],"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Show"],"Show"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}},"sourceSpan":{"end":[655,14],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[637,1]},"title":"showPackNode"}],"comments":"Pack node extends hierarchy with circle coordinates\n","info":{"dataDeclType":"data","declType":"data","roles":["Representational"],"typeArguments":[["a",null]]},"kind":null,"sourceSpan":{"end":[632,4],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[623,1]},"title":"PackNode"},{"children":[],"comments":"Configuration for pack layout\n","info":{"arguments":[["a",null]],"declType":"typeSynonym","type":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["size",{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["width",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["height",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"},{"annotation":[],"contents":["padding",{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"},{"annotation":[],"contents":["radius",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}},"kind":null,"sourceSpan":{"end":[662,4],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[658,1]},"title":"PackConfig"},{"children":[],"comments":"Default pack configuration\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"a","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[665,44],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[665,1]},"title":"defaultPackConfig"},{"children":[{"comments":null,"info":{"arguments":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Record"],"tag":"TypeConstructor"},{"annotation":[],"contents":["data_",{"annotation":[],"contents":"a","tag":"TypeVar"},{"annotation":[],"contents":["value",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"Number"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":["children",{"annotation":[],"contents":[{"annotation":[],"contents":[["Data","Maybe"],"Maybe"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"HierarchyData"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"},{"annotation":[],"tag":"REmpty"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"RCons"}],"tag":"TypeApp"}],"declType":"dataConstructor"},"sourceSpan":{"end":[677,4],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[673,25]},"title":"HierarchyData"}],"comments":"Simple hierarchy node for testing\n","info":{"dataDeclType":"newtype","declType":"data","roles":["Representational"],"typeArguments":[["a",null]]},"kind":null,"sourceSpan":{"end":[677,4],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[673,1]},"title":"HierarchyData"},{"children":[],"comments":"Create a hierarchy from data\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"a","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"HierarchyData"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[681,53],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[681,1]},"title":"hierarchy"},{"children":[],"comments":"Apply pack layout to a hierarchy using the map-based algorithm\nImplements D3's two-pass algorithm for proper padding\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"a","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackConfig"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["DataViz","Layout","Hierarchy","Pack"],"PackNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"a","tag":"TypeVar"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[722,59],"name":"../../visualisation libraries/purescript-hylograph-layout/src/DataViz/Layout/Hierarchy/Pack.purs","start":[722,1]},"title":"pack"}],"name":"DataViz.Layout.Hierarchy.Pack","reExports":[]}