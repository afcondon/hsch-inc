{"comments":"HATS Integration for Hylograph Simulation\n\nProvides efficient tick updates for force simulations using HATS templates.\n\nThe key insight: simulation nodes change position every tick, but their\nstructure (radius, color, children) is static. Instead of rebuilding the\nfull HATS tree at 60fps, we:\n\n1. Initial render: Use full HATS rerender for enter/exit/structural changes\n2. Tick updates: Only update transform attribute via fast DOM mutation\n\n## Usage\n\n```purescript\nimport Hylograph.HATS (forEach)\nimport Hylograph.HATS.InterpreterTick (rerender)\nimport Hylograph.Simulation.HATS (tickUpdate)\n\n-- Build your tree with forEach (keyed)\nnodesTree = forEach \"nodes\" Group nodes (\\n -> show n.id) nodeTemplate\n\n-- Initial render creates elements with full HATS tree\nvoid $ rerender \"#container\" nodesTree\n\n-- On each tick, fast-path updates only transforms\n-- (nodes array has same elements, just different x/y values)\ntickUpdate \"#container\" currentNodes\n```\n\nThis gives HATS expressiveness for templates with D3-level performance\nfor tick updates (~60fps with thousands of nodes).\n\n## Element Requirements\n\nFor tickUpdate to work, each node element MUST have:\n- `data-id` attribute containing the node's id (as string)\n- A `transform` attribute (will be set to `translate(x,y)`)\n\nExample HATS template:\n```purescript\nnodeTemplate node =\n  elem Group\n    [ thunkedStr \"data-id\" (show node.id)  -- Required for tickUpdate\n    , thunkedStr \"transform\" (\"translate(\" <> show node.x <> \",\" <> show node.y <> \")\")\n    ]\n    [ elem Circle [...] [] ]\n```\n","declarations":[{"children":[],"comments":"Fast tick update - only updates transform attribute\n\nUses direct DOM manipulation to set transform on each node element.\nMuch faster than rebuilding the HATS tree at 60fps.\n\nPrerequisites:\n- Elements must have been created by initial rerender\n- Each element must have data-id attribute matching node.id\n\nCall this on simulation tick events when only positions change.\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"r","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Simulation","HATS"],"PositionedNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"r","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[96,17],"name":"../../visualisation libraries/purescript-hylograph-simulation/src/Hylograph/Simulation/HATS.purs","start":[92,1]},"title":"tickUpdate"},{"children":[],"comments":"Fast tick update with radius changes\n\nLike tickUpdate but also updates the radius on child circles.\nUse when nodes can resize during simulation.\n","info":{"declType":"value","type":{"annotation":[],"contents":{"identifier":"r","kind":null,"skolem":null,"type":{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Prim"],"String"],"tag":"TypeConstructor"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Function"],"tag":"TypeConstructor"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Prim"],"Array"],"tag":"TypeConstructor"},{"annotation":[],"contents":{"annotation":[],"contents":[{"annotation":[],"contents":[["Hylograph","Simulation","HATS"],"RadiusNode"],"tag":"TypeConstructor"},{"annotation":[],"contents":"r","tag":"TypeVar"}],"tag":"TypeApp"},"tag":"ParensInType"}],"tag":"TypeApp"}],"tag":"TypeApp"},{"annotation":[],"contents":[{"annotation":[],"contents":[["Effect"],"Effect"],"tag":"TypeConstructor"},{"annotation":[],"contents":[["Data","Unit"],"Unit"],"tag":"TypeConstructor"}],"tag":"TypeApp"}],"tag":"TypeApp"}],"tag":"TypeApp"},"visibility":"TypeVarInvisible"},"tag":"ForAll"}},"kind":null,"sourceSpan":{"end":[107,17],"name":"../../visualisation libraries/purescript-hylograph-simulation/src/Hylograph/Simulation/HATS.purs","start":[103,1]},"title":"tickUpdateWithRadius"}],"name":"Hylograph.Simulation.HATS","reExports":[]}