{"builtWith":"0.15.15","comments":[{"LineComment":" | HATS Integration for Hylograph Simulation"},{"LineComment":" |"},{"LineComment":" | Provides efficient tick updates for force simulations using HATS templates."},{"LineComment":" |"},{"LineComment":" | The key insight: simulation nodes change position every tick, but their"},{"LineComment":" | structure (radius, color, children) is static. Instead of rebuilding the"},{"LineComment":" | full HATS tree at 60fps, we:"},{"LineComment":" |"},{"LineComment":" | 1. Initial render: Use full HATS rerender for enter/exit/structural changes"},{"LineComment":" | 2. Tick updates: Only update transform attribute via fast DOM mutation"},{"LineComment":" |"},{"LineComment":" | ## Usage"},{"LineComment":" |"},{"LineComment":" | ```purescript"},{"LineComment":" | import Hylograph.HATS (forEach)"},{"LineComment":" | import Hylograph.HATS.InterpreterTick (rerender)"},{"LineComment":" | import Hylograph.Simulation.HATS (tickUpdate)"},{"LineComment":" |"},{"LineComment":" | -- Build your tree with forEach (keyed)"},{"LineComment":" | nodesTree = forEach \"nodes\" Group nodes (\\n -> show n.id) nodeTemplate"},{"LineComment":" |"},{"LineComment":" | -- Initial render creates elements with full HATS tree"},{"LineComment":" | void $ rerender \"#container\" nodesTree"},{"LineComment":" |"},{"LineComment":" | -- On each tick, fast-path updates only transforms"},{"LineComment":" | -- (nodes array has same elements, just different x/y values)"},{"LineComment":" | tickUpdate \"#container\" currentNodes"},{"LineComment":" | ```"},{"LineComment":" |"},{"LineComment":" | This gives HATS expressiveness for templates with D3-level performance"},{"LineComment":" | for tick updates (~60fps with thousands of nodes)."},{"LineComment":" |"},{"LineComment":" | ## Element Requirements"},{"LineComment":" |"},{"LineComment":" | For tickUpdate to work, each node element MUST have:"},{"LineComment":" | - `data-id` attribute containing the node's id (as string)"},{"LineComment":" | - A `transform` attribute (will be set to `translate(x,y)`)"},{"LineComment":" |"},{"LineComment":" | Example HATS template:"},{"LineComment":" | ```purescript"},{"LineComment":" | nodeTemplate node ="},{"LineComment":" |   elem Group"},{"LineComment":" |     [ thunkedStr \"data-id\" (show node.id)  -- Required for tickUpdate"},{"LineComment":" |     , thunkedStr \"transform\" (\"translate(\" <> show node.x <> \",\" <> show node.y <> \")\")"},{"LineComment":" |     ]"},{"LineComment":" |     [ elem Circle [...] [] ]"},{"LineComment":" | ```"}],"decls":[{"annotation":{"meta":null,"sourceSpan":{"end":[107,17],"start":[103,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[108,57],"start":[108,24]}},"type":"Var","value":{"identifier":"updateNodeTransformsWithRadiusFFI","moduleName":["Hylograph","Simulation","HATS"]}},"identifier":"tickUpdateWithRadius"},{"annotation":{"meta":null,"sourceSpan":{"end":[96,17],"start":[92,1]}},"bindType":"NonRec","expression":{"annotation":{"meta":{"metaType":"IsForeign"},"sourceSpan":{"end":[97,37],"start":[97,14]}},"type":"Var","value":{"identifier":"updateNodeTransformsFFI","moduleName":["Hylograph","Simulation","HATS"]}},"identifier":"tickUpdate"}],"exports":["tickUpdate","tickUpdateWithRadius"],"foreign":["updateNodeTransformsFFI","updateNodeTransformsWithRadiusFFI"],"imports":[{"annotation":{"meta":null,"sourceSpan":{"end":[55,23],"start":[55,1]}},"moduleName":["Effect"]},{"annotation":{"meta":null,"sourceSpan":{"end":[124,17],"start":[48,1]}},"moduleName":["Hylograph","Simulation","HATS"]},{"annotation":{"meta":null,"sourceSpan":{"end":[53,15],"start":[53,1]}},"moduleName":["Prelude"]},{"annotation":{"meta":null,"sourceSpan":{"end":[124,17],"start":[48,1]}},"moduleName":["Prim"]}],"moduleName":["Hylograph","Simulation","HATS"],"modulePath":"../../visualisation libraries/purescript-hylograph-simulation/src/Hylograph/Simulation/HATS.purs","reExports":{},"sourceSpan":{"end":[124,17],"start":[48,1]}}