---

## Evening Session: Dead Code Cleanup + Code Explorer CLI

### Accomplished

**1. Restored AnimatedTreeCluster from Time Machine backup**
- Previous HATS-only implementation was snapping, not animating
- Restored working hybrid approach: HATS for structure, `requestAnimationFrame_` for animation
- Key insight: HATS tick can't interpolate SVG path strings, need manual animation
- Created FFI file with `requestAnimationFrame_`, `setAttributeNS_`, `getTimestamp`, etc.
- Updated TourMotionScrollyHATS to use restored `draw`/`update` API

**2. Created HATS Animation Patterns how-to** (`docs/kb/howto/hats-animation-patterns.md`)
- Documents when to use HATS tick vs manual animation
- Covers the hybrid pattern for path interpolation
- Common mistakes section to prevent future confusion

**3. Dead code cleanup - moved 28 files to `site/website/deadcode/`**
- TreeBuilder2 & TreeBuilder3 (explicitly marked REMOVED in Main.purs)
- Simpsons standalone viz modules (BarChart, DatasetSelector, ParadoxChart, Standalone)
- Unused components (ForceControlPanel, MiniNotation, PrismJS, Understanding/TOC)
- Unused shared modules (TutorialNav, ZoomSticker, ChartDimensions, FlareData)
- Orphan FFI files (TreeAPI.js, AnimatedAttrTest.js, ChartBuilder.js, ExamplesGallery.js, SankeyDebug.js)
- Build still passes after cleanup

**4. Added orphan detection to Code Explorer CLI** (`ce-database/loader/ce-loader.js`)
- `ce-loader orphans --project <name>` - Find modules not imported anywhere
- `ce-loader orphan-groups --project <name>` - Find disconnected module clusters
- Tested on demo-website: found 7 orphan modules in 7 groups
- CodeSnippet/CodeSnippets/Utilities form disconnected cluster

**5. Created fresh demo-website snapshot**
- Loaded 1020 modules, 11630 declarations, 18426 function calls
- Ready for tomorrow's CE work

**6. Created Code Explorer Evolution plan** (`docs/kb/plans/code-explorer-evolution.md`)
- Vision: Address "fog of war" in LLM-assisted development
- Architecture: CLI + Halogen viz sharing same DuckDB
- Planned: Incremental loading, CLI↔viz links, cross-project analysis, MCP integration

### Key Insight: Fog of War

LLM-assisted development creates a novel visibility problem:
- Human: Changes are voluminous, hard to track details
- LLM: Context window amnesia, loses history between sessions
- Both: Need live structural awareness of "what does codebase look like NOW"

Solution: Both visualization (understanding) AND CLI (quick checks, CI) - connected via shared DB.

### Files Modified/Created

- `site/website/src/Viz/TreeAPI/AnimatedTreeCluster.purs` - Restored from backup
- `site/website/src/Viz/TreeAPI/AnimatedTreeCluster.js` - Created FFI
- `site/website/src/Component/Tour/TourMotionScrollyHATS.purs` - Updated for restored API
- `docs/kb/howto/hats-animation-patterns.md` - New how-to
- `docs/kb/plans/code-explorer-evolution.md` - New plan
- `docs/kb/INDEX.md` - Updated with new docs
- `showcases/corrode-expel/ce-database/loader/ce-loader.js` - Added orphan commands
- 28 files moved to `site/website/deadcode/`

### Tomorrow: Code Explorer Day

Focus areas identified:
1. Halogen app review - what works, what's missing
2. Incremental loading - key to making CE practical
3. Orphan visualization - wire CLI findings into force graph
4. Cross-project analysis - load full workspace

---

## Morning Session: Claude Context Document Update

### Accomplished

**claude-context.md comprehensively updated** (`docs/kb/reference/claude-context.md`)

The document was significantly out of date. Major updates:

1. **Renamed PSD3 → Hylograph** throughout, added explanation of the rename rationale (hylomorphism = the core abstraction)

2. **Added HATS concept** (Hylomorphic Abstract Tree Syntax) to Design Philosophy:
   - Ana: data → visualization tree
   - Cata: tree → DOM operations
   - Hylo: fused pipeline

3. **Updated all library names** from `psd3-*` to `hylograph-*`:
   - hylograph-selection (core + HATS)
   - hylograph-graph
   - hylograph-layout
   - hylograph-simulation
   - hylograph-simulation-halogen
   - hylograph-music
   - hylograph-canvas (new)
   - hylograph-d3-kernel (new)
   - hylograph-optics (new)
   - hylograph-simulation-core (new)
   - hylograph-transitions (new)
   - hylograph-wasm-kernel (new)

4. **Added missing showcases**:
   - halogen-spider (Site Explorer)
   - psd3-prim-zoo-mosh (Recursion schemes zoo)
   - allergy-outlay (Gallery Outlays)
   - emptier-coinage (Metrics)
   - graph-algos
   - hylograph-app
   - hylograph-guide
   - psd3-lorenz-attractor
   - psd3-timber-lieder
   - psd3-topics
   - simpsons-paradox
   - purescript-makefile-parser

5. **Moved scuppered-ligature** from site/ to showcases/ in directory listing

6. **Added new section**: Knowledge Base & Claude Skills documenting:
   - `docs/kb/` structure
   - `.claude/commands/` skills table
   - Session logging requirements

7. **Updated architecture diagram** to reflect hylograph naming

8. **Expanded anagram codenames table** with new showcases

### Files Modified

- `docs/kb/reference/claude-context.md` - Complete rewrite for hylograph rename and current state

### Next Steps

- Consider updating `docs/kb/INDEX.md` title from "PSD3" to "Hylograph"
- Site Explorer needs permanent location decision
- Continue with Zoo work (recursion schemes visualizations)

---
