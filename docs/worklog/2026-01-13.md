# Worklog: 2026-01-13

## Session Focus
Polyglot PureScript website reorganization and public deployment via Tailscale Funnel.

## Accomplished

### Website Reorganization ("Polyglot PureScript" Rebrand)

**Directory Changes:**
- Moved `site/scuppered-ligature/` → `showcases/scuppered-ligature/` (edge router now a peer showcase)
- Deleted `site/landing/` (redundant - website now serves root)
- Updated Makefile paths for edge router
- Updated docker-compose.yml (removed landing service, updated edge build context)

**Rebranding:**
- Title: "Polyglot PureScript - One language, many backends"
- Hero: "One language, six backends, zero compromises"
- 8 showcase cards with backend technology badges (JS, Python, Erlang, Lua, WASM, Node.js, PureScript)
- External showcases open in new tab (`target="_blank"`)

**Architecture Diagram:**
- Created `polyglot-architecture.svg` showing PureScript → 5 backend compilation flow
- Added to home page hero section between title and showcase grid
- Shows: purs, purepy, purerl, pslua compilers → JS, Python, Erlang, Lua, WASM runtimes

**Python Demos Tab Navigation:**
- Added tab bar to EE website (dark theme styling)
- Added tab bar to GE website (light theme styling)
- Tabs link between `/ee` and `/ge` for easy switching

**Lua Edge Showcase Page:**
- New route: `#/showcase/lua-edge`
- "The Invisible Showcase" - explains edge router architecture
- Includes: request flow ASCII diagram, Router.purs code examples, upstream mapping table
- Added CSS for tables, code blocks, diagrams

### Tailscale Funnel Setup

**Public Access Enabled:**
- Enabled Tailscale Funnel on MacMini via admin console
- Configured: `tailscale funnel --bg 80`
- Site now publicly accessible at: **https://andrews-mac-mini.vaquita-paradise.ts.net/**
- Verified working from outside tailnet (phone tether test)

### Deployment

**Commits:**
- `site/website`: `4cddcdf` - Architecture diagram and Lua Edge showcase
- `site/website`: `82791b0` - Rebrand to Polyglot PureScript with 8 showcase cards
- `showcases/hypo-punter`: `74559f9` - Python demos tab navigation
- Main repo: `e1274e7` - Move scuppered-ligature to showcases, remove landing

**Docker Rebuild:**
- Rebuilt website, ee-frontend, ge-frontend containers
- All services returning 200

## Files Changed

| File | Changes |
|------|---------|
| `site/website/public/index.html` | Title update |
| `site/website/public/psd3.css` | Backend badge colors, Lua Edge page styles |
| `site/website/public/assets/diagrams/polyglot-architecture.svg` | New architecture diagram |
| `site/website/src/Component/Home.purs` | Hero text, showcase cards, architecture diagram |
| `site/website/src/Component/Showcase/ShowcaseLuaEdge.purs` | New showcase page |
| `site/website/src/Types.purs` | Added ShowcaseLuaEdge route |
| `site/website/src/RoutingDSL.purs` | Added route matcher and path |
| `site/website/src/Main.purs` | Wired up ShowcaseLuaEdge component |
| `site/website/Dockerfile` | Serve at root (not /website/) |
| `showcases/hypo-punter/ee-website/public/index.html` | Tab navigation |
| `showcases/hypo-punter/ge-website/public/index.html` | Tab navigation |
| `showcases/scuppered-ligature/` | Moved from site/ |
| `docker-compose.yml` | Removed landing, updated edge context |
| `Makefile` | Updated edge router path |

## Explored But Not Pursued
- Custom domain `polyglot.purescri.pt` - awaiting CNAME from domain owner
- Logo redesign - keeping PSD3 logo initially

## Parking Lot
- Custom domain DNS setup when CNAME is available
- Architecture diagram interactivity (clickable backends?)
- Lua architecture page: add live metrics display
- Fix Code Explorer and Tidal backends (pre-existing issues)

## Decisions Made
- **Website as landing**: Removed separate landing page, website serves root
- **Funnel over port forwarding**: Tailscale Funnel provides HTTPS without router config
- **External links in new tab**: Showcases that leave the SPA open in new tab

## URLs

- **Public (Funnel)**: https://andrews-mac-mini.vaquita-paradise.ts.net/
- **Tailscale internal**: http://100.101.177.83/
- **Pending**: https://polyglot.purescri.pt/ (awaiting DNS)

## Next Session Setup
- Configure custom domain when CNAME is ready
- Test all showcases via public funnel URL
- Consider adding more showcase pages (Tidal, Python backends)
